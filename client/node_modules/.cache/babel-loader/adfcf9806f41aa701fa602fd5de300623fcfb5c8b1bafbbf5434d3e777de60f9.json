{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\n\n// handles the authentication\nexport default function useAuth(code) {\n  _s();\n  const [accessToken, set_access_token] = useState();\n  const [refreshToken, set_refresh_token] = useState();\n  const [expiresIn, set_expires_in] = useState();\n\n  // \n  useEffect(() => {\n    axios.post('http://localhost:3001/login', {\n      // sends HTTP POST to /login endpoint\n      code\n    }).then(res => {\n      // gets response from /login endpoint of the server\n      console.log(\"hiiiiiiiiii\");\n      console.log(res.data);\n      set_access_token(res.data.accessToken);\n      set_refresh_token(res.data.refreshToken);\n      set_expires_in(res.data.expiresIn);\n      window.history.pushState({}, null, \"/\");\n    }).catch(error => {\n      window.location = \"/\";\n      console.error(error);\n    });\n  }, [code]);\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return;\n    const interval = setInterval(() => {\n      axios.post('http://localhost:3001/refresh', {\n        refreshToken\n      }).then(res => {\n        console.log(res.data);\n        set_access_token(res.data.accessToken);\n        set_expires_in(res.data.expiresIn);\n      }).catch(error => {\n        console.error(error);\n        window.location = \"/\";\n      });\n    }, (expiresIn - 60) * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, expiresIn]);\n  return accessToken;\n}\n\n/*\nExplanation:\nIn the server folder, there is currently a server running on port 3001 (or whatever the specified port number is) that listens for a payload.\n*/\n_s(useAuth, \"T7Md8dTJO8ZNrYHIbTukb/GBn2c=\");","map":{"version":3,"names":["axios","React","useEffect","useState","useAuth","code","_s","accessToken","set_access_token","refreshToken","set_refresh_token","expiresIn","set_expires_in","post","then","res","console","log","data","window","history","pushState","catch","error","location","interval","setInterval","clearInterval"],"sources":["/Users/devin/Code/soapopera/client/src/useAuth.js"],"sourcesContent":["import axios from 'axios'\nimport React, { useEffect, useState } from 'react'\n\n\n// handles the authentication\nexport default function useAuth(code) {\n  const [accessToken, set_access_token] = useState()\n  const [refreshToken, set_refresh_token] = useState()\n  const [expiresIn, set_expires_in] = useState()\n\n  // \n  useEffect(() => {\n    axios.post('http://localhost:3001/login', { // sends HTTP POST to /login endpoint\n        code,\n    })\n    .then(res => { // gets response from /login endpoint of the server\n      console.log(\"hiiiiiiiiii\")\n      console.log(res.data)\n      set_access_token(res.data.accessToken)\n      set_refresh_token(res.data.refreshToken)\n      set_expires_in(res.data.expiresIn)\n      window.history.pushState({}, null, \"/\")\n    })\n    .catch(error => {\n      window.location = \"/\"\n      console.error(error)\n    }) \n  }, [code])\n\n\n  useEffect(() => {\n    if (!refreshToken || !expiresIn) return\n    const interval = setInterval(() => {\n      axios\n        .post('http://localhost:3001/refresh', {refreshToken,})\n        .then(res => {\n          console.log(res.data)\n          set_access_token(res.data.accessToken)\n          set_expires_in(res.data.expiresIn)\n        })\n        .catch(error => {\n          console.error(error)\n          window.location = \"/\"\n        })\n      \n    }, (expiresIn - 60) * 1000);\n    return () => clearInterval(interval)\n  \n  }, [refreshToken, expiresIn])\n\n  return accessToken\n}\n\n\n/*\nExplanation:\nIn the server folder, there is currently a server running on port 3001 (or whatever the specified port number is) that listens for a payload.\n*/\n\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;AAGlD;AACA,eAAe,SAASC,OAAOA,CAACC,IAAI,EAAE;EAAAC,EAAA;EACpC,MAAM,CAACC,WAAW,EAAEC,gBAAgB,CAAC,GAAGL,QAAQ,EAAE;EAClD,MAAM,CAACM,YAAY,EAAEC,iBAAiB,CAAC,GAAGP,QAAQ,EAAE;EACpD,MAAM,CAACQ,SAAS,EAAEC,cAAc,CAAC,GAAGT,QAAQ,EAAE;;EAE9C;EACAD,SAAS,CAAC,MAAM;IACdF,KAAK,CAACa,IAAI,CAAC,6BAA6B,EAAE;MAAE;MACxCR;IACJ,CAAC,CAAC,CACDS,IAAI,CAACC,GAAG,IAAI;MAAE;MACbC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1BD,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC;MACrBV,gBAAgB,CAACO,GAAG,CAACG,IAAI,CAACX,WAAW,CAAC;MACtCG,iBAAiB,CAACK,GAAG,CAACG,IAAI,CAACT,YAAY,CAAC;MACxCG,cAAc,CAACG,GAAG,CAACG,IAAI,CAACP,SAAS,CAAC;MAClCQ,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC;IACzC,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;MACdJ,MAAM,CAACK,QAAQ,GAAG,GAAG;MACrBR,OAAO,CAACO,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC,EAAE,CAAClB,IAAI,CAAC,CAAC;EAGVH,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,YAAY,IAAI,CAACE,SAAS,EAAE;IACjC,MAAMc,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjC1B,KAAK,CACFa,IAAI,CAAC,+BAA+B,EAAE;QAACJ;MAAa,CAAC,CAAC,CACtDK,IAAI,CAACC,GAAG,IAAI;QACXC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC;QACrBV,gBAAgB,CAACO,GAAG,CAACG,IAAI,CAACX,WAAW,CAAC;QACtCK,cAAc,CAACG,GAAG,CAACG,IAAI,CAACP,SAAS,CAAC;MACpC,CAAC,CAAC,CACDW,KAAK,CAACC,KAAK,IAAI;QACdP,OAAO,CAACO,KAAK,CAACA,KAAK,CAAC;QACpBJ,MAAM,CAACK,QAAQ,GAAG,GAAG;MACvB,CAAC,CAAC;IAEN,CAAC,EAAE,CAACb,SAAS,GAAG,EAAE,IAAI,IAAI,CAAC;IAC3B,OAAO,MAAMgB,aAAa,CAACF,QAAQ,CAAC;EAEtC,CAAC,EAAE,CAAChB,YAAY,EAAEE,SAAS,CAAC,CAAC;EAE7B,OAAOJ,WAAW;AACpB;;AAGA;AACA;AACA;AACA;AAHAD,EAAA,CAjDwBF,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}